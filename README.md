<p align="center">
  <img src="https://i.imgur.com/SWs77TE.png" width="625" alt="front page" />
</p>

## üç´ Ecommerce Demo Client (React 17, Redux 4)

---

## Quick start

To build the client for production:
```console
$ npm run build
```

To run the client on development mode:
```console
$ npm run dev
```

---

## ‚ö†Ô∏è  Node.js Version Warning

This project was developed with older dependencies (React 17, Redux Toolkit 1.x, Webpack 5.x) which were current around **2021-2022**.

**It is strongly recommended to run this project using Node.js version 16 (LTS).**

While the project may still install with newer versions (v18, v20, etc.), you may encounter various issues, including:

* **Installation/Build Errors:** Conflicts with native modules or deprecations in newer Node.js APIs.
* **Dependency Mismatches:** Unexpected runtime issues or warnings due to older peer dependency requirements.

## Testing

### Integration tests

To run MSW API and jest tests:
```console
$ npm run test
```

---

### End-to-end tests

*Make sure client is on and connected to the database!*

To run end to end tests:
```console
$ npm run cypress:open
```

*The cypress test has to be run with `$ npm run dev` because cypress wont find paths otherwise with visit() function.*

---

## About the Client

This is a mobile-responsive e-commerce client application built using **ReactJS** with no additional UI libraries. It features simple user access control and manages application state via **Redux**.

* **Core Features:**
    * **Browsing:** Search functionality, category pages, and detailed product pages.
    * **User Accounts:** User profile dashboard (`/profile-dashboard`) for managing user details, passwords, and email.
    * **Cart & Checkout:** Shopping cart implemented with Redux and checkout functionality.
    * **Payments:** Integrated with the **Stripe API** for secure payment processing.
    * **Post-Purchase:** Provides a purchase information page and a downloadable invoice (generated by the backend using PDFKit).

* **Authentication & Access:**
    * Users can **register** (`/register`) and **log in** (`/login`).
    * Access control includes both a **Profile Dashboard** and an **Admin Dashboard**.
    * A "test user" is seeded in the database for easy testing of admin features.

* **Technical Stack (Backend/Tools):**
    * **Backend:** **NestJS** (API) with state persisted to **PostgreSQL v14.1**.
    * **Authentication:** Handled via **JSON Web Tokens (JWTs)** using the `passport-jwt` library.
    * **Notifications:** Rudimentary in-app notifications are implemented via Redux.

* **Testing:**
    * **Jest:** Used for testing Redux selectors (e.g., cart functionality).
    * **MSW (Mock Service Worker):** Used for mocking API requests during testing.
    * **Cypress:** Used for end-to-end (e2e) and integration testing.

*Images are sourced from [unsplash](https://unsplash.com/) and [pexels](https://www.pexels.com/)*

---

## Forms: Form Components and Handling Form Authentication

This project implements **form handling components** located in `/src/features/forms/`. These components were created as a fun exercise to manage form state.

---

### Core Form Components

| Component | Usage | Key Features |
| :--- | :--- | :--- |
| **`ProfileForm`** | Used for **Authentication** (Login/Register) and **User Profile** pages. | <ul><li>Takes a `fields` object to define structure, HTML attributes, labels, and validation warnings.</li><li>Constructs inputs dynamically based on the `fields` object.</li></ul> |
| **`TestForm`** | Used for **Admin Dashboard** and **Checkout** forms. | <ul><li>Similar concept to `ProfileForm` but uses a specific list of keys to match and structure inputs.</li><li>Accepts more specialized arguments for complex form scenarios.</li></ul> |
| **`MultipleSelectForm`** | Located in `/src/features/forms/testform.tsx`. | **Custom UI:** Implements multi-selection that allows users to select/unselect options with a simple left-click. |

### Authentication & Submission Handling

Form submissions are standardized using the **`handleForm`** utility function:

* It receives the collection of HTML form control elements.
* It uses `Array.from` and `filter` to parse and select input elements by node name.
* It transforms the collected data into a simple **list of key-value pairs** using `Object.fromEntries` for easy API consumption.

**NOTE:** The `AuthOverlay` component provides the visual overlay wrapper for the forms used on the authentication pages.

For the environmental variables ('.env') file, define `PORT`, `HOST`, `SCHEME`, `production` and `STRIPE_PUBLISHABLE_KEY` to use Stripe's api.

*Images are from [unsplash](https://unsplash.com/) and [pexels](https://www.pexels.com/)*

## Client preview

![Demo of the client in action](./src/assets/preview.gif)
